---
driver_plugin: vagrant
driver_config:
  require_chef_omnibus: true

platforms:
- name: centos-6.7
  driver:
    network:
    - ["forwarded_port", {guest: 8080, host: 9000}]
- name: centos-7.1
  driver:
    network:
    - ["forwarded_port", {guest: 8080, host: 9001}]
- name: ubuntu-12.04
  driver:
    network:
    - ["forwarded_port", {guest: 8080, host: 9002}]
- name: ubuntu-14.04
  driver:
    network:
    - ["forwarded_port", {guest: 8080, host: 9003}]

suites:
- name: default
  run_list: ["recipe[play_test::default]"]
  attributes: {
    "play": {
      "config_variables": {
        "secret": "mysecret" # should be ignored since play_test sets it to a different value
      },
      "args": [
        "-Dhttp.port=8080",
        "-J-Xms128M",
        "-J-Xmx512m",
        "-J-server"
      ]
    }
  }
